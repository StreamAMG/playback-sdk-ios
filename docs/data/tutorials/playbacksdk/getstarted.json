{"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/PlaybackSDK\/tutorials\/PlaybackSDK\/GetStarted"},"schemaVersion":{"major":0,"patch":0,"minor":3},"hierarchy":{"modules":[{"reference":"doc:\/\/PlaybackSDK\/tutorials\/Table-Of-Contents\/Getting-Started","projects":[{"reference":"doc:\/\/PlaybackSDK\/tutorials\/PlaybackSDK\/GetStarted","sections":[{"reference":"doc:\/\/PlaybackSDK\/tutorials\/PlaybackSDK\/GetStarted#Playback-SDK","kind":"task"}]}]}],"reference":"doc:\/\/PlaybackSDK\/tutorials\/Table-Of-Contents","paths":[["doc:\/\/PlaybackSDK\/tutorials\/Table-Of-Contents","doc:\/\/PlaybackSDK\/tutorials\/Table-Of-Contents\/$volume","doc:\/\/PlaybackSDK\/tutorials\/Table-Of-Contents\/Getting-Started"]]},"variants":[{"paths":["\/tutorials\/playbacksdk\/getstarted"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"project","metadata":{"categoryPathComponent":"Table-Of-Contents","title":"Playback SDK Overview","category":"PlaybackSDK Tutorial","role":"project"},"sections":[{"kind":"hero","title":"Playback SDK Overview","estimatedTimeInMinutes":30,"content":[{"inlineContent":[{"text":"Playback SDK simplifies integrating video playback functionalities into OTT applications. It provides a unified interface for interacting with video APIs and managing playback logic.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Key Features:"}],"type":"strong"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Abstraction:","type":"text"}]},{"type":"text","text":" Hides the complexities of underlying video APIs, allowing you to focus on the core playback experience."}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Flexibility:","type":"text"}]},{"text":" Supports different video providers and allows the creation of custom playback plugins for extended functionalities.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"Error Handling:","type":"text"}],"type":"strong"},{"type":"text","text":" Provides mechanisms to handle potential issues during playback and notify your application."}],"type":"paragraph"}]}]}],"chapter":"Getting Started"},{"tasks":[{"stepsSection":[{"runtimePreview":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"text":"Initialize the Playback SDK by providing your API key, setup and register the default player plugin.","type":"text"},{"text":" ","type":"text"},{"type":"strong","inlineContent":[{"type":"text","text":"Make sure this step is done when the app starts."}]}]}],"code":"PlaybackDemoApp.swift","media":null,"caption":[]},{"code":"PlaybackDemoAppWithUserAgent.swift","type":"step","runtimePreview":null,"caption":[{"inlineContent":[{"type":"text","text":"This step is only required for content that needs a token, when using Alamofire or other 3rd party frameworks that overwrite the standard "},{"code":"user-agent","type":"codeVoice"},{"text":" header with their own.","type":"text"},{"text":"\n","type":"text"},{"type":"text","text":"If the content requires starting a CloudPay session, it’s important that the request to start the session has the same "},{"code":"user-agent","type":"codeVoice"},{"type":"text","text":" header as the video loading requests from the player. This can be achieved either by disabling the overwriting behaviour in the 3rd party networking framework you’re using, or by passing a "},{"code":"userAgent","type":"codeVoice"},{"text":" parameter to the ","type":"text"},{"type":"codeVoice","code":"initialize"},{"type":"text","text":" method, like in this example with Alamofire."}],"type":"paragraph"}],"content":[{"inlineContent":[{"text":"Add custom ","type":"text"},{"code":"user-agent","type":"codeVoice"},{"type":"text","text":" header."}],"type":"paragraph"}],"media":null},{"caption":[{"inlineContent":[{"type":"text","text":"In this step, the code utilizes the "},{"inlineContent":[{"text":"loadPlayer","type":"text"}],"type":"strong"},{"type":"text","text":" function provided by the Playback SDK to initialize and load the video player. The function takes the entry ID and authorization token as parameters. Additionally, it includes a closure to handle any potential playback errors that may occur during the loading process."},{"text":" ","type":"text"},{"text":"The ","type":"text"},{"type":"strong","inlineContent":[{"type":"text","text":"handlePlaybackError"}]},{"text":" function is called within the closure to handle the playback errors. It switches on the type of error received and provides appropriate error handling based on the type of error encountered.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"The code also includes a placeholder comment to indicate where the removal of the player could be implemented in the "},{"type":"strong","inlineContent":[{"type":"text","text":"onDisappear"}]},{"text":" modifier.","type":"text"},{"type":"text","text":" "},{"text":"If you want to allow users to access free content or if you’re implementing a guest mode, you can pass an empty string or ","type":"text"},{"inlineContent":[{"text":"nil","type":"text"}],"type":"strong"},{"text":" value as the ","type":"text"},{"inlineContent":[{"type":"text","text":"authorizationToken"}],"type":"strong"},{"text":" when calling the ","type":"text"},{"inlineContent":[{"type":"text","text":"loadPlayer"}],"type":"strong"},{"type":"text","text":" function. This will bypass the need for authentication, enabling unrestricted access to the specified content."}],"type":"paragraph"}],"type":"step","media":null,"content":[{"inlineContent":[{"type":"text","text":"Load the player using the Playback SDK and handle any playback errors."}],"type":"paragraph"}],"code":"PlayerTestView.swift","runtimePreview":null},{"code":"PlayerTestPlaylistView.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Load the player passing a playlist using the Playback SDK and handle any playlist errors."}]}],"type":"step","runtimePreview":null,"caption":[{"inlineContent":[{"text":"To load a playlist and handle errors, use the ","type":"text"},{"type":"strong","inlineContent":[{"text":"loadPlaylist","type":"text"}]},{"text":" function provided by the Playback SDK to initialize and load the video player. This function takes an array of entry IDs, the starting entry ID, and an authorization token as parameters. Additionally, it includes a closure to handle any potential playlist errors that may occur during the loading process.","type":"text"},{"text":" ","type":"text"},{"text":"The ","type":"text"},{"inlineContent":[{"type":"text","text":"handlePlaybackErrors"}],"type":"strong"},{"type":"text","text":" function is called within the closure to handle the playlist errors. It iterates through an array of "},{"type":"strong","inlineContent":[{"text":"PlaybackError","type":"text"}]},{"text":" objects and, for each error, switches on the error type to provide appropriate error handling.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"The code also includes a placeholder comment to indicate where the removal of the player can be implemented in the "},{"inlineContent":[{"type":"text","text":"onDisappear"}],"type":"strong"},{"type":"text","text":" modifier."},{"text":" ","type":"text"},{"type":"text","text":"If you want to allow users to access free content or implement a guest mode, you can pass an empty string or "},{"type":"strong","inlineContent":[{"text":"nil","type":"text"}]},{"type":"text","text":" value as the "},{"type":"strong","inlineContent":[{"type":"text","text":"authorizationToken"}]},{"text":" when calling the ","type":"text"},{"type":"strong","inlineContent":[{"text":"loadPlaylist","type":"text"}]},{"text":" function. This will bypass the need for authentication, enabling unrestricted access to the specified content.","type":"text"}],"type":"paragraph"}],"media":null},{"content":[{"type":"paragraph","inlineContent":[{"text":"Playlist controls and events","type":"text"}]}],"type":"step","code":"PlayerTestPlaylistControlsAndEventsView.swift","caption":[{"inlineContent":[{"type":"text","text":"To control playlist playback and events, declare a "},{"inlineContent":[{"type":"text","text":"VideoPlayerPluginManager"}],"type":"strong"},{"type":"text","text":" singleton instance as a "},{"type":"strong","inlineContent":[{"text":"@StateObject","type":"text"}]},{"type":"text","text":" variable. This allows you to access playlist controls and listen to player events."},{"type":"text","text":" "},{"text":"In the ","type":"text"},{"type":"strong","inlineContent":[{"type":"text","text":"onReceive"}]},{"text":" modifier, you can listen to player events such as the ","type":"text"},{"inlineContent":[{"type":"text","text":"PlaylistTransitionEvent"}],"type":"strong"},{"text":", which provides information about transitions between videos.","type":"text"},{"text":" ","type":"text"},{"text":"Through the ","type":"text"},{"inlineContent":[{"type":"text","text":"pluginManager.selectedPlugin"}],"type":"strong"},{"text":", you can interact with playlist controls and retrieve the current video ID using the ","type":"text"},{"inlineContent":[{"type":"text","text":"activeEntryId"}],"type":"strong"},{"type":"text","text":" function."}],"type":"paragraph"}],"runtimePreview":null,"media":null},{"type":"step","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Handle the playback errors from Playback SDK."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This step describes enum for error handling. Above is the error enum returned by the SDK, where the apiError also has the reason code and message for the API error. The playback API is returning the reason code in the response. For the list of the error codes and reasons, please refer to "},{"type":"reference","isActive":true,"identifier":"https:\/\/streamamg.stoplight.io\/docs\/playback-documentation-portal\/ec642e6dcbb13-get-video-playback-data"}]}],"code":"PlaybackAPIError.swift","runtimePreview":null,"media":null}],"title":"Playback SDK","anchor":"Playback-SDK","contentSection":[{"kind":"fullWidth","content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Explore how to use StreamAMG Playback SDK.","type":"text"}],"type":"strong"}]}]}]}],"kind":"tasks"}],"references":{"https://streamamg.stoplight.io/docs/playback-documentation-portal/ec642e6dcbb13-get-video-playback-data":{"title":"Get Video Playback Data | Playback","titleInlineContent":[{"text":"Get Video Playback Data | Playback","type":"text"}],"url":"https:\/\/streamamg.stoplight.io\/docs\/playback-documentation-portal\/ec642e6dcbb13-get-video-playback-data","type":"link","identifier":"https:\/\/streamamg.stoplight.io\/docs\/playback-documentation-portal\/ec642e6dcbb13-get-video-playback-data"},"PlaybackAPIError.swift":{"fileType":"swift","fileName":"PlaybackAPIError.swift","highlights":[],"identifier":"PlaybackAPIError.swift","content":["import Foundation","","\/\/ Define reason codes returned by Playback SDK","public enum PlaybackErrorReason: Equatable {","    \/\/ Http error 400","    case headerError","    case badRequestError","    case siteNotFound","    case configurationError","    case apiKeyError","    case mpPartnerError","    ","    \/\/ Http error 401","    case tokenError","    case tooManyDevices","    case tooManyRequests","    case noEntitlement","    case noSubscription","    case noActiveSession","    case notAuthenticated","    ","    \/\/ Http error 404","    case noEntityExist","    ","    \/\/ Unknown error with associated custom message","    case unknownError(String)","","    init(fromString value: String) {","        switch value.uppercased() {","        case \"HEADER_ERROR\": self = .headerError","        case \"BAD_REQUEST_ERROR\": self = .badRequestError","        case \"SITE_NOT_FOUND\": self = .siteNotFound","        case \"CONFIGURATION_ERROR\": self = .configurationError","        case \"API_KEY_ERROR\": self = .apiKeyError","        case \"MP_PARTNER_ERROR\": self = .mpPartnerError","        case \"TOKEN_ERROR\": self = .tokenError","        case \"TOO_MANY_DEVICES\": self = .tooManyDevices","        case \"TOO_MANY_REQUESTS\": self = .tooManyRequests","        case \"NO_ENTITLEMENT\": self = .noEntitlement","        case \"NO_SUBSCRIPTION\": self = .noSubscription","        case \"NO_ACTIVE_SESSION\": self = .noActiveSession","        case \"NOT_AUTHENTICATED\": self = .notAuthenticated","        case \"NO_ENTITY_EXIST\": self = .noEntityExist","        default: self = .unknownError(value)","        }","    }","}"],"syntax":"swift","type":"file"},"PlayerTestPlaylistControlsAndEventsView.swift":{"syntax":"swift","fileType":"swift","type":"file","fileName":"PlayerTestPlaylistControlsAndEventsView.swift","content":["import SwiftUI","import PlaybackSDK","","struct PlayerTestPlaylistControlsAndEventsView: View {","    ","    @StateObject private var pluginManager = VideoPlayerPluginManager.shared","    private let entryIDs = [\"ENTRY_ID1\", \"ENTRY_ID_2\", \"ENTRY_ID_3\"]","    private let entryIDToPlay = \"ENTRY_ID_2\" \/\/ Optional parameter","    private let entryIdToSeek = \"ENTRY_ID_TO_SEEK\"","    private let authorizationToken = \"JWT_TOKEN\"","    ","    var body: some View {","        VStack {","            \/\/ Load playlist with the playback SDK","            PlaybackSDKManager.shared.loadPlaylist(entryIDs: entryIDs, entryIDToPlay: entryIDToPlay, authorizationToken: authorizationToken) { errors in","                handlePlaybackError(errors)","            }","            .onReceive(pluginManager.selectedPlugin!.event) { event in","                if let event = event as? PlaylistTransitionEvent { \/\/ Playlist Event","                    if let from = event.from.metadata?[\"entryId\"], let to = event.to.metadata?[\"entryId\"] {","                        print(\"Playlist event changed from \\(from) to \\(to)\")","                    }","                }","            }","            .onDisappear {","                \/\/ Remove the player here","            }","            ","            Spacer()","            ","            Button {","                \/\/ You can use the following playlist controls","                pluginManager.selectedPlugin?.playFirst() \/\/ Play the first video","                pluginManager.selectedPlugin?.playPrevious() \/\/ Play the previous video","                pluginManager.selectedPlugin?.playNext() \/\/ Play the next video","                pluginManager.selectedPlugin?.playLast() \/\/ Play the last video","                pluginManager.selectedPlugin?.seek(entryIdToSeek) { success in \/\/ Seek a specific video","                    if (!success) {","                        let errorMessage = \"Unable to seek video Id \\(entryIdToSeek)\"","                    }","                }","                pluginManager.selectedPlugin?.activeEntryId() \/\/ Get the active video Id","            } label: {","                Image(systemName: \"list.triangle\")","            }","            ","            Spacer()","        }","        .padding()","    }","    ","    private func handlePlaybackErrors(_ errors: [PlaybackAPIError]) {","        ","        for error in errors {","            switch error {","            case .apiError(let statusCode, let message, let reason):","                let message = \"\\(message) Status Code \\(statusCode), Reason: \\(reason)\"","                print(message)","            default:","                print(\"Error code and errorrMessage not found: \\(error.localizedDescription)\")","            }","        }","    }","    ","}"],"highlights":[{"line":4},{"line":6},{"line":9},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":28},{"line":30},{"line":31},{"line":32},{"line":33},{"line":34},{"line":35},{"line":36},{"line":37},{"line":38},{"line":39},{"line":40},{"line":41},{"line":42},{"line":43},{"line":44},{"line":45},{"line":46},{"line":47}],"identifier":"PlayerTestPlaylistControlsAndEventsView.swift"},"doc://PlaybackSDK/tutorials/Table-Of-Contents":{"abstract":[{"type":"text","text":"Welcome to the PlaybackSDK tutorial! In this tutorial, you will learn how to integrate and use the PlaybackSDK in your iOS applications."}],"url":"\/tutorials\/table-of-contents","identifier":"doc:\/\/PlaybackSDK\/tutorials\/Table-Of-Contents","type":"topic","title":"Introduction to PlaybackSDK","role":"overview","kind":"overview"},"doc://PlaybackSDK/tutorials/Table-Of-Contents/Getting-Started":{"role":"article","type":"topic","url":"\/tutorials\/table-of-contents\/getting-started","kind":"article","title":"Getting Started","abstract":[],"identifier":"doc:\/\/PlaybackSDK\/tutorials\/Table-Of-Contents\/Getting-Started"},"doc://PlaybackSDK/tutorials/PlaybackSDK/GetStarted":{"type":"topic","url":"\/tutorials\/playbacksdk\/getstarted","estimatedTime":"30min","title":"Playback SDK Overview","kind":"project","identifier":"doc:\/\/PlaybackSDK\/tutorials\/PlaybackSDK\/GetStarted","abstract":[{"type":"text","text":"Playback SDK simplifies integrating video playback functionalities into OTT applications. It provides a unified interface for interacting with video APIs and managing playback logic."}],"role":"project"},"PlayerTestView.swift":{"fileType":"swift","highlights":[],"fileName":"PlayerTestView.swift","identifier":"PlayerTestView.swift","syntax":"swift","content":["import SwiftUI","import PlaybackSDK","","struct PlayerTestView: View {","    ","    private let entryID = \"ENTRY_ID\"","    private let authorizationToken = \"JWT_TOKEN\"","    ","    var body: some View {","        VStack {","            \/\/ Load player with the playback SDK","            PlaybackSDKManager.shared.loadPlayer(entryID: entryID, authorizationToken: authorizationToken) { error in","                handlePlaybackError(error)","            }","            .onDisappear {","                \/\/ Remove the player here","            }","            Spacer()","        }","        .padding()","    }","    ","    private func handlePlaybackError(_ error: PlaybackAPIError) {","        switch error {","        case .apiError(let statusCode, let errorMessage, let reason):","            print(\"\\(errorMessage) Status Code \\(statusCode)\")","            errorMessage = \"\\(errorMessage) Status Code \\(statusCode) Reason \\(reason)\"","        default:","            print(\"Error loading HLS stream in PlaybackUIView: \\(error.localizedDescription)\")","            errorMessage = \"Error code and errorrMessage not found: \\(error.localizedDescription)\"","        }","    }","    ","}"],"type":"file"},"doc://PlaybackSDK/tutorials/PlaybackSDK/GetStarted#Playback-SDK":{"kind":"section","title":"Playback SDK","type":"section","abstract":[{"text":"Playback SDK simplifies integrating video playback functionalities into OTT applications. It provides a unified interface for interacting with video APIs and managing playback logic.","type":"text"}],"identifier":"doc:\/\/PlaybackSDK\/tutorials\/PlaybackSDK\/GetStarted#Playback-SDK","url":"\/tutorials\/playbacksdk\/getstarted#Playback-SDK","role":"pseudoSymbol"},"PlaybackDemoAppWithUserAgent.swift":{"fileType":"swift","fileName":"PlaybackDemoAppWithUserAgent.swift","highlights":[{"line":3},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21}],"identifier":"PlaybackDemoAppWithUserAgent.swift","content":["import SwiftUI","import PlaybackSDK","import Alamofire","","@main","struct PlaybackDemoApp: App {","","    let sdkManager = PlaybackSDKManager()","    let apiKey = \"API_KEY\"","    var body: some Scene {","        WindowGroup {","            HomeView()","        }","    }","","    init() {","        \/\/ Get the user-agent set by Alamofire","        let userAgent = AF.session.configuration.httpAdditionalHeaders?[\"User-Agent\"]","","        \/\/ Initialize the Playback SDK with the provided API key and custom user-agent","        PlaybackSDKManager.shared.initialize(apiKey: apiKey, userAgent: userAgent) { result in","            switch result {","            case .success(let license):","                \/\/ Obtained license upon successful initialization","                print(\"SDK initialized with license: \\(license)\")","","                \/\/ Register the video player plugin","                let bitmovinPlugin = BitmovinPlayerPlugin()","                ","                \/\/ Setting up player plugin","                var config = VideoPlayerConfig()","                config.playbackConfig.autoplayEnabled = true \/\/ Toggle autoplay","                config.playbackConfig.backgroundPlaybackEnabled = true \/\/ Toggle background playback","                bitmovinPlugin.setup(config: config)","                ","                VideoPlayerPluginManager.shared.registerPlugin(bitmovinPlugin)","","            case .failure(let error):","                \/\/ Print an error message and set initializationError flag upon initialization failure","                print(\"SDK initialization failed with error: \\(error)\")","","            }","        }","    }","}"],"syntax":"swift","type":"file"},"PlayerTestPlaylistView.swift":{"type":"file","highlights":[],"identifier":"PlayerTestPlaylistView.swift","syntax":"swift","fileType":"swift","fileName":"PlayerTestPlaylistView.swift","content":["import SwiftUI","import PlaybackSDK","","struct PlayerTestPlaylistView: View {","    ","    private let entryIDs = [\"ENTRY_ID1\", \"ENTRY_ID_2\", \"ENTRY_ID_3\"]","    private let entryIDToPlay = \"ENTRY_ID_2\" \/\/ Optional parameter","    private let authorizationToken = \"JWT_TOKEN\"","    ","    var body: some View {","        VStack {","            \/\/ Load playlist with the playback SDK","            PlaybackSDKManager.shared.loadPlaylist(entryIDs: entryIDs, entryIDToPlay: entryIDToPlay, authorizationToken: authorizationToken) { errors in","                handlePlaybackError(errors)","            }","            .onDisappear {","                \/\/ Remove the player here","            }","            Spacer()","        }","        .padding()","    }","    ","    private func handlePlaybackErrors(_ errors: [PlaybackAPIError]) {","        ","        for error in errors {","            switch error {","            case .apiError(let statusCode, let message, let reason):","                let message = \"\\(message) Status Code \\(statusCode), Reason: \\(reason)\"","                print(message)","            default:","                print(\"Error code and errorrMessage not found: \\(error.localizedDescription)\")","            }","        }","    }","    ","}"]},"PlaybackDemoApp.swift":{"highlights":[],"identifier":"PlaybackDemoApp.swift","content":["import SwiftUI","import PlaybackSDK","","@main","struct PlaybackDemoApp: App {","","    let sdkManager = PlaybackSDKManager()","    let apiKey = \"API_KEY\"","    var body: some Scene {","        WindowGroup {","            HomeView()","        }","    }","","    init() {","        \/\/ Initialize the Playback SDK with the provided API key and base URL","        PlaybackSDKManager.shared.initialize(apiKey: apiKey) { result in","            switch result {","            case .success(let license):","                \/\/ Obtained license upon successful initialization","                print(\"SDK initialized with license: \\(license)\")","","                \/\/ Register the video player plugin","                let bitmovinPlugin = BitmovinPlayerPlugin()","                ","                \/\/ Setting up player plugin","                var config = VideoPlayerConfig()","                config.playbackConfig.autoplayEnabled = true \/\/ Toggle autoplay","                config.playbackConfig.backgroundPlaybackEnabled = true \/\/ Toggle background playback","                bitmovinPlugin.setup(config: config)","                ","                VideoPlayerPluginManager.shared.registerPlugin(bitmovinPlugin)","","            case .failure(let error):","                \/\/ Print an error message and set initializationError flag upon initialization failure","                print(\"SDK initialization failed with error: \\(error)\")","","            }","        }","    }","}",""],"type":"file","fileName":"PlaybackDemoApp.swift","fileType":"swift","syntax":"swift"}}}